<div class="saved-searches">
  <div class="saved-searches__header">
      <div class="saved-searches__header-title">
        Saved Searches
      </div>
      <div class="saved-searches__header-actions" >
          <div class="saved-searches__more-menu">
            <mat-icon class="close-icon clickable">
              more_vert
            </mat-icon>
          </div>
      </div>
    </div>

  <div class="saved-searches__subhead">
    <div class="saved-searches__filter-form">
      <form onsubmit="return false">
        <mat-form-field>
          <input matInput
                 [(ngModel)]="searchFilter"
                 (change)="onNewFilter($event.target.value)"
                 (input)="onNewFilter($event.target.value)"
                 (keyup.enter)="unfocusFilter()"
                 name="filterSearches"
                 placeholder="Filter Searches" #filterInput>
        </mat-form-field>
      </form>
    </div>

    <div class="saved-searches__save-button">
      <button (click)="saveCurrentSearch()"
              mat-raised-button
              color="accent">
        Save Current Search
      </button>
    </div>
  </div>

  <div class="content-wrapper">
      <div *ngIf="searchType$ | async as searchType"
           class="saved-searches__content">
        <div *ngIf="(searches$ | async).length > 0; else noSavedSearchBlock">
          <div *ngFor="let search of (searches$ | async)">
            <div *ngIf="filteredSearches.has(search.id); else noSavedSearchBlock">
              <app-saved-search
                [search]="search"
                [searchType]="searchType"
                [isExpanded]="search.id === expandedSearchId"
                [isNew]="search.id === newSearchId"
                (expand)="onExpandSearch($event)"
                (updateFilters)="updateSearchFilters($event)"
                (updateName)="updateSearchName($event)"
                (deleteSearch)="deleteSearch($event)"
                (setSearch)="onSetSearch($event)">
              </app-saved-search>
            </div>
          </div>
        </div>
        <ng-template #noSavedSearchBlock>
          <div class="no-saved-searches">
            <h2>You have no saved searches.</h2>
          </div>
        </ng-template>
      </div>
  </div>

  <div class="saved-searches__footer">
    <div class="saved-searches__close-button">
      <button (click)="onClose()"
              mat-raised-button
              color="primary">
        Done
      </button>
    </div>
  </div>
</div>
