<div (dragover)="onFileHovered($event)"
  id="map" class="map" #map>
</div>

<div *ngIf="breakpoint$ | async as breakpoint" class="map-header">
  <div class="header-controls"
        fxLayout="row"
        fxFlexFill>

    <div fxLayout="row">
      <mat-card *ngFor="let banner of (banners$ | async)"
        [@bannerTransition]
        class="banner-card"
        fxFlex="auto">

        <div class="banner-text">
          <div [innerHTML]="banner.text"></div>
          <button (click)="removeBanner(banner)" mat-icon-button>
            <mat-icon >clear</mat-icon>
          </button>
        </div>
      </mat-card>
    </div>

    <div *ngIf="breakpoint > breakpoints.MOBILE" fxLayout="row">
      <div fxFlex="nogrow">
        <app-map-controls></app-map-controls>
      </div>
    </div>

    <div *ngIf="breakpoint === breakpoints.MOBILE" class="mobile-map-controls">
      <button (click)="openDrawControl()"
        *ngIf="searchType === searchTypes.DATASET"
        style="margin: 4px;" color="white" mat-fab>
        <mat-icon>edit</mat-icon>
      </button>

      <button (click)="openMapControl()" style="margin: 4px;" color="white" mat-fab>
        <mat-icon>layers</mat-icon>
      </button>
    </div>

    <img *ngIf="breakpoint > breakpoints.MOBILE"
      src="/assets/NASA_logo.svg" class="meatball">

    <ng-container *ngIf="breakpoint === breakpoints.MOBILE">
      <div (click)="closeMobileFullscreenControls()"
        *ngIf="fullscreenControl !== fc.NONE"
        class="mobile-controls-background"></div>

      <div *ngIf="fullscreenControl === fc.MAP" class="mobile-map-controls-full">
        <div style="margin: 10px auto; zoom: 140%">
          <app-view-selector></app-view-selector>
        </div>
        <div *ngIf="(view$ | async) === viewTypes.EQUITORIAL" style="margin: 10px auto; zoom: 140%">
          <app-layer-selector></app-layer-selector>
        </div>
      </div>

      <div *ngIf="fullscreenControl === fc.DRAW" class="mobile-map-controls-full">
        <div style="margin: 10px auto; zoom: 140%;">
          <app-interaction-selector></app-interaction-selector>
        </div>

        <div style="margin: 10px auto; zoom: 140%;">
          <app-draw-selector></app-draw-selector>
        </div>
      </div>
    </ng-container>
  </div>
</div>

<app-search-dropdown></app-search-dropdown>

<app-file-upload
  (dialogClose)="onFileUploadDialogClosed($event)"
  (newSearchPolygon)="onNewSearchPolygon($event)"
  [interaction$]="interactionMode$">
</app-file-upload>

<app-attributions>
</app-attributions>

<div
  (mouseenter)="enterDrawPopup()"
  (mouseleave)="leaveDrawPopup()"
  id="popup" class="ol-popup" #overlay>
</div>

