<div class="breadcrumb-list"
     fxLayout="row"
     fxLayout.lt-lg="column"
     fxFlexFill>

  <div fxLayout="row"
       fxLayout.gt-lg="column">
    <div fxFlex="auto" class="logo">
      <app-logo></app-logo>
    </div>
  </div>

  <div fxLayout="column" fxFill>

    <div fxLayout="row" fxLayout.lt-md="column" class="breadcrumb-row">

      <!-- SEARCH TYPE -->
      <div fxFlex="nogrow" fxFlex.lt-lg="nogrow" class="breadcrumb">
        <mat-form-field fxFlex.lt-lg="auto">
          <mat-label>Search Type</mat-label>
          <mat-select
            [(ngModel)]="searchType"
            (selectionChange)="onSetSearchType($event.value)">
            <mat-option [value]="searchTypes.DATASET">Geographic</mat-option>
            <mat-option [value]="searchTypes.LIST">List</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- DATASET/GEOGRAPHIC SEARCH FILTERS -->
      <ng-container *ngIf="searchType === searchTypes.DATASET">

        <div fxLayout="row">
          <!-- DATASET FILTER -->
          <div fxFlex="nogrow" fxFlex.lt-lg="50"
               (click)="clearSelectedBreadcrumb()"
               class="breadcrumb">
            <app-dataset-selector></app-dataset-selector>
          </div>

          <!-- AOI FILTER -->
          <form fxFlex="nogrow" fxFlex.lt-lg="50"
                #polygonForm="ngForm"
                class="breadcrumb"
                (mouseenter)="isHoveringAOISelector = true"
                (mouseleave)="isHoveringAOISelector = false"
                (keydown.enter)="$event.preventDefault()">

            <mat-form-field
              [class.invalid-input-animation]="isAOIError"
              class="full-width">
              <label>
                <input
                  (change)="onInputSearchPolygon($event.target.value)"
                  [value]="polygon"
                  [(ngModel)]="polygon"
                  name="searchPolygon"
                  matInput placeholder="Area of Interest">
              </label>

              <mat-icon
                *ngIf="!!polygon" (click)="onCopy()"
                matTooltip="Copy to clipboard"
                [class.ghost-item]="!isHoveringAOISelector"
                class="clickable copy-icon" matSuffix>
                file_copy
              </mat-icon>
              <mat-icon
                (click)="onNewSelectedFilter(filterTypes.AOI)"
                matTooltip="More options"
                class="clickable additional-aoi-toggle"
                matSuffix>
                {{ selectedFilter === filterTypes.AOI ? 'arrow_drop_up' : 'arrow_drop_down' }}
              </mat-icon>
            </mat-form-field>

            <mat-card *ngIf="selectedFilter === filterTypes.AOI"
                      class="breadcrumb-filter">
              <app-aoi-upload></app-aoi-upload>
            </mat-card>
          </form>
        </div>

        <!-- DATES START/END AND MORE ... FILTER -->
        <div fxLayout="row">
          <div fxFlex="300px" fxFlex.lt-lg="50"
               class="breadcrumb">
            <app-date-selector></app-date-selector>
          </div>
          <div fxFlex="nogrow" class="breadcrumb">
            <button (click)="onToggleFiltersMenu()"
                    mat-button class="additional-filters-button">
              More
              <br>
              <mat-icon>more_horiz</mat-icon>
            </button>
          </div>
          <div fxFlex class="breadcrumb extra-padding-top">
            <app-search-button></app-search-button>
            <button (click)="onClearSearch()" mat-flat-button>
              Clear
            </button>
          </div>
        </div>

      </ng-container>

      <!-- ADDITIONAL FILTERS FOR NON-DATASET SEARCH -->
      <ng-container *ngIf="searchType !== searchTypes.DATASET">
        <div fxFlex="nogrow" class="breadcrumb additional-filters">
              <button (click)="onToggleFiltersMenu()"
                      mat-flat-button
                      class="search-dialog-button">
                <span *ngIf="searchType === searchTypes.LIST">
                  <mat-icon>edit</mat-icon>
                  Edit List
                  </span>
              </button>
        </div>
        <div fxFlex class="breadcrumb extra-padding-top">
          <app-search-button></app-search-button>
          <button (click)="onClearSearch()" mat-flat-button>
            Clear
          </button>
        </div>
      </ng-container>
    </div>

    <div fxLayout="row wrap"
         fxFlexFill
         class="info-bar">

      <div fxFlex.gt-md="550px" class="first-info">
      </div>
      <div fxFlex="300px" class="max-results">
          <app-max-results-selector
            [maxResults]="maxResults$ | async"
            [isMaxResultsLoading]="isMaxResultsLoading$ | async"
            [currentSearchAmount]="currentSearchAmount$ | async"
            (newMaxResults)="onNewMaxResults($event)"
          ></app-max-results-selector>
      </div>
      <div fxFlex="300px">
        <app-nav-buttons
          (openQueue)="onOpenDownloadQueue()"
          [queuedProducts]="queuedProducts$ | async">
        </app-nav-buttons>
      </div>
    </div>
  </div>
</div>
