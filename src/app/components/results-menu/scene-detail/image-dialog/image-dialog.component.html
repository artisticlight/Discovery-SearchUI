<div class="browse-dialog">
  <div class="dialog-header">
    <div *ngIf="scene$ | async as scene" class="dialog-header--layout">
      <div>
        <h3 class="mp0">{{ scene.name }}</h3>
        <span class="faint-text">
          <a *ngIf="dataset" [href]="dataset.infoUrl" target="_blank" matTooltip="Dataset" class="faint-text">
            {{ dataset.name }}
          </a> â€¢ {{ scene.metadata.date | fullDate }}
        </span>
      </div>
      <div>
        <button (click)="closeDialog()" mat-icon-button>
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>
  </div>

  <div class="main-window">
    <div id="browse-map" class="browse-map--size">
    </div>

    <div *ngIf="isImageLoading" color="accent" class="browse-map--overlay">
      <mat-spinner></mat-spinner>
    </div>
  </div>

  <app-browse-list class="browse-list"></app-browse-list>

  <div class="scene-detail">
    <h3> Scene Detail</h3>
    <app-scene-metadata></app-scene-metadata>
    <h3> {{ products.length }} Files </h3>
    <mat-action-list style="overflow: auto">
      <button  *ngFor="let product of products"
        [matMenuTriggerFor]="action_menu" mat-list-item>
        {{ product.productTypeDisplay }}
        <mat-menu #action_menu="matMenu" xPosition="before">

          <a mat-menu-item [href]="product.downloadUrl" target="_blank" matTooltip="Download file">
            <span style="margin-right: 10px; margin-left: 10px;">
              <span *ngIf="product.bytes === 0">Virtual</span>
              <span *ngIf="product.bytes !== 0">{{product.bytes | readableSizeFromBytes }}</span>
            </span>
            <span>
              <mat-icon>cloud_download</mat-icon>
            </span>
          </a>

          <button (click)="onToggleQueueProduct(product)"
             matTooltip="{{ !queuedProductIds.has(product.id) ? 'Add file to queue' : 'Remove file from queue' }}"
             mat-menu-item>
            <span *ngIf="!queuedProductIds.has(product.id)">
              Add
              <mat-icon >add_shopping_cart</mat-icon>
            </span>
            <span *ngIf="queuedProductIds.has(product.id)">
              Remove
              <mat-icon >shopping_cart</mat-icon>
            </span>
          </button>
        </mat-menu>
      </button>

    </mat-action-list>
  </div>
</div>
