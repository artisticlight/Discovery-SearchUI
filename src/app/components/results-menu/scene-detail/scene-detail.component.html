<div *ngIf="breakpoint$ | async as breakpoint"
  class="detail-card scrollable"
  [class.scrollable]="isScrollable">

  <div *ngIf="scene">
    <mat-card-header>
      <mat-card-title class="detail-card-header">
        <span>{{ scene.name }}</span>

        <app-copy-to-clipboard
          [value]="scene.name"
          prompt="Copy scene name"
          class="clipboard-icon"></app-copy-to-clipboard>

      </mat-card-title>
      <mat-card-subtitle class="subtitle">
        <a [href]="dataset.infoUrl" target="_blank" matTooltip="Dataset" class="faint-text">
          {{ dataset.name }} <span *ngIf="dataset.name === 'SMAP'">V{{ scene.name.slice(-1) }}</span>
        </a> â€¢
        <span matTooltip="Frequency">{{ dataset.frequency }}</span>
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="content">
      <div class="w100" fxFlex fxLayout="row" fxLayoutAlign="space-between">
        <div class="w50">
          <app-scene-metadata
             [scene]="scene"
             [dataset]="dataset"
             [searchType]="searchType"
             [offsets]="masterOffsets$ | async">
          </app-scene-metadata>
        </div>

        <div [class.clickable]="sceneHasBrowse()" class="browse-container w40">
          <div (click)="onOpenImage();"
            class="img-container"
               [matBadgeHidden]="(browses$ | async).length <= 1"
               matBadge="{{ (browses$ | async).length }}"
               matBadgePosition="above after">
            <img
              class="browse-img fit-to-container"
              [hidden]="isImageLoading"
              [src]="(browses$ | async)[0]"
              (load)="isImageLoading = false"
              onerror="this.src='assets/no-browse.png'"
              alt="Sentinel1 scene browse image">
            <div [class.hidden]="!sceneHasBrowse()" class="img-overlay fit-to-container">
                <mat-icon class="overlay-icon">fullscreen</mat-icon>
              </div>
          </div>
        </div>
      </div>
    </mat-card-content>

    <div class="detail-card-info">
      <mat-button-toggle-group class="scene-actions" name="sceneActions" aria-label="Scene Actions">
        <mat-button-toggle *ngIf="searchType !== searchTypes.BASELINE && hasBaseline"
           (click)="makeBaselineSearch()"
           class="mini-toggle-button"
           target="_blank"
           matTooltip="Use this scene in the Baseline Tool for interferometry">
          Baseline Tool
        </mat-button-toggle>

        <mat-button-toggle *ngIf="searchType !== searchTypes.BASELINE && hasBaseline"
           (click)="makeSBASSearch()"
           class="mini-toggle-button"
           target="_blank"
           matTooltip="Use this scene in the SBAS Tool to make product pairs for interferometry">
          SBAS Tool
        </mat-button-toggle>

        <mat-button-toggle *ngIf="searchType === searchTypes.BASELINE"
          (click)="onSetSelectedAsMaster()"
           class="mini-toggle-button">
          Set as Reference
        </mat-button-toggle>

        <mat-button-toggle *ngIf="searchType === searchTypes.DATASET && prop.isRelevant(p.PATH, dataset) && prop.isRelevant(p.FRAME, dataset)"
           (click)="findSimilarScenes()"
           class="mini-toggle-button"
           matTooltip="Search based on this scene's path/frame">
          More Like This
        </mat-button-toggle>
      </mat-button-toggle-group>

      <p *ngIf="!authService.isLoggedIn" class="faint-text accessing-text">
        Accessing this data requires you to log in.
        Some datasets also require a proposal, or agreement with a
        EULA which is presented after log in.
      </p>
    </div>
  </div>
</div>


<div *ngIf="!scene">
  <div fxFlex fxLayoutAlign="center" gdAlignColumns="center">
    <span class="faint-text">No Scene Selected</span>
  </div>
</div>
