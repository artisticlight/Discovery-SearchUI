<mat-list-item
  (mouseenter)="isHovered = true"
  (mouseleave)="isHovered = false">

  <ng-container matListIcon *ngIf="canUnzip(product)">
    <mat-icon
      *ngIf="!isUnzipLoading && !isOpen"
      (click)="onLoadUnzippedPoduct()"
      [matTooltip]="isUserLoggedIn ? 'View file contents' : 'Login to view contents'"
      [class.clickable]="isUserLoggedIn"
      [class.fainter-text]="!isUserLoggedIn"
      [class.disabled-cursor]="!isUserLoggedIn">
        keyboard_arrow_right
    </mat-icon>
    <mat-icon
      *ngIf="isOpen"
      (click)="onCloseProduct()"
      matTooltip="Close contents"
      class="clickable">
        keyboard_arrow_down
    </mat-icon>
    <div *ngIf="isUnzipLoading">
      <fa-icon icon="spinner" [pulse]="true"></fa-icon>
    </div>
  </ng-container>
  <ng-container matListIcon *ngIf="!canUnzip(product)">
    <mat-icon mat-icon-button disabled></mat-icon>
  </ng-container>

  <div class="clickable" mat-line>
    <b>
      <span *ngIf="product.productTypeDisplay.length > 40">
        {{ product.productTypeDisplay | truncate : 36 }}{{ product.productTypeDisplay | truncate : -4 : '' }}
      </span>
      <span *ngIf="product.productTypeDisplay.length <= 40">
        {{ product.productTypeDisplay }}
      </span>
    </b>

    <a *ngIf="isHovered" class="icon-margin">
      <app-copy-to-clipboard
        [value]="product.id"
        prompt="Copy file ID">
      </app-copy-to-clipboard>
    </a>
  </div>

    <div mat-line>
      <span *ngIf="product.bytes === 0">Virtual</span>
      <span *ngIf="product.bytes !== 0">{{product.bytes | readableSizeFromBytes }}</span>
    </div>

    <a mat-icon-button [href]="product.downloadUrl" target="_blank" matTooltip="Download file">
      <mat-icon>cloud_download</mat-icon>
    </a>

    <button (click)="onToggleQueueProduct()"
       matTooltip="{{ !isQueued ? 'Add file to downloads' : 'Remove file from downloads' }}"
       mat-icon-button>
        <mat-icon *ngIf="!isQueued">add_shopping_cart</mat-icon>
        <mat-icon *ngIf="isQueued">shopping_cart</mat-icon>
    </button>
</mat-list-item>
