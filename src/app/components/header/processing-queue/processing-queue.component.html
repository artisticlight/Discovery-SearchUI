<mat-card class="processing-queue">
  <mat-card-title-group style="margin-bottom: 0 !important;" class="card-title-group">
    <mat-card-title>Processing Queue</mat-card-title>
    <mat-card-subtitle> <b>{{ user }}</b> - {{ remaining }} jobs left this month</mat-card-subtitle>

    <div class="close-x" (click)="onCloseDialog()">
      <mat-icon>close</mat-icon>
    </div>

    <mat-card-subtitle>
    </mat-card-subtitle>
  </mat-card-title-group>

  <mat-card-content>
    <div class="jobs-dialog">
      <div *ngIf="breakpoint !== breakpoints.MOBILE" class="jobs-display--desktop">
        <div class="jobs-list-panel">
          <app-processing-queue-jobs
            [jobs]="jobs"
            [areJobsLoading]="areJobsLoading"
            (removeJob)="onRemoveJob($event)">
          </app-processing-queue-jobs>
        </div>

        <div class="jobs-detail">
          <app-processing-options></app-processing-options>

          <div style="padding-top: 10px;">
            <span *ngIf="jobs.length > remaining">
              {{ jobs.length }} jobs in processing queue (only {{ remaining }} remaining)
            </span>
          </div>
        </div>
      </div>

      <div *ngIf="breakpoint === breakpoints.MOBILE">
        <div>
          <button (click)="onSelectScenesTab()"
            [class.selected]="selectedTab === Tabs.SCENES" mat-button>
            Scenes
          </button>
          <button (click)="onSelectOptionsTab()"
            [class.selected]="selectedTab === Tabs.OPTIONS" mat-button>
            Processing Options
          </button>
        </div>
        <div *ngIf="selectedTab === Tabs.SCENES" class="jobs-display--mobile">
          <app-processing-queue-jobs
            [jobs]="jobs"
            [areJobsLoading]="areJobsLoading"
            (removeJob)="onRemoveJob($event)">
          </app-processing-queue-jobs>
        </div>
        <div *ngIf="selectedTab === Tabs.OPTIONS" class="jobs-display--mobile">
          <app-processing-options></app-processing-options>
        </div>
      </div>
      <mat-progress-bar *ngIf="isQueueSubmitProcessing" mode="indeterminate"></mat-progress-bar>
      <div class="w100 hyp3-footer">
        <button *ngIf="previousQueue === null"
                (click)="onClearJobQueue(jobs)" style="margin-top: 3px;" mat-button>
          <mat-icon style="margin-right: 5px;">delete</mat-icon>
          <span>Clear</span>
        </button>

        <button *ngIf="previousQueue !== null"
                (click)="onRestoreJobQueue(previousQueue)" mat-button>
          <mat-icon style="margin-right: 5px;">undo</mat-icon>
          <span>Restore</span>
        </button>

        <button
          (click)="onSubmitQueue()"
          [disabled]="jobs.length > remaining"
          mat-button>
          <span *ngIf="!isQueueSubmitProcessing">
            Submit Queue
          </span>

          <span *ngIf="isQueueSubmitProcessing">
            Loading...
          </span>
        </button>
      </div>

    </div>
  </mat-card-content>
</mat-card>
